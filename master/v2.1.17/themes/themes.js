define(["jquery","windows/windows","common/util","highstock","jquery-growl"],function(a,b){function c(c,e,f){d?d.moveToTop():require(["text!themes/themes.html"],function(g){g=a(g).i18n(),d=b.createBlankWindow(g,{dialogClass:"dialog-confirm",width:360,height:175,resizable:!1,collapsable:!1,minimizable:!1,maximizable:!1,closable:!1,closeOnEscape:!1,modal:!0,ignoreTileAction:!0,destroy:function(){d=null}}),g.find("#apply").on("click",function(){a.growl.notice({message:"Loading "+f});var b=e.replace("theme_","").replace("_","-");c?(local_storage.remove("theme"),local_storage.set("custom_theme",c)):"default"===b?(local_storage.remove("theme"),local_storage.remove("custom_theme")):local_storage.set("theme",{name:b}),location.reload()}),g.find("#cancel").on("click",function(){d.dialog("close"),d.dialog("destroy")}),d.dialog("open")})}var d=null,e=local_storage.get("theme"),f=local_storage.get("custom_theme");e=e&&e.name,e?require(["lib/highstock/themes/"+e]):Highcharts.setOptions(f?f:{plotOptions:{candlestick:{lineColor:"rgba(0,0,0,1)",color:"rgba(215,24,24,1)",upColor:"rgba(2,146,14,1)",upLineColor:"rgba(0,0,0,1)"}}});var g=Highcharts.getOptions().lang;return Object.keys(g).map(function(a){return"object"==typeof g[a]?void g[a].forEach(function(b,c){g[a][c]=b.i18n()}):void(g[a]=g[a].i18n())}),a("a.theme_dark_blue, a.theme_dark_green, a.theme_dark_unica, a.theme_gray, a.theme_grid, a.theme_grid_light, a.theme_sand_signika, a.theme_skies, a.theme_default").off("click").on("click",function(){var b=a(this),d=b.text(),e=b.attr("class");c(null,e,d)}),{confirmationDialog:c}});