define(["highstock","common/util"],function(){var a={};return{init:function(b){!function(c,d){function e(a){c.addEvent(j,"click",function(b){j.annotate&&(j.annotate=!1,f(b.xAxis[0].value,b.xAxis[0].axis,a),c.removeEvent(j,"click"))})}function f(b,c,e){var f="verticalLine_"+(new Date).getTime(),i={value:b,width:2,color:"#ff0000",dashStyle:"shortdash",id:f};e&&d.extend(i,e);var j=c.addPlotLine(i).svgElem.css({cursor:"pointer"}).attr("id",f).translate(0,0).on("mousedown",g).on("dblclick",h);return a[f]=j,j}function g(){j.annotate=!0;var e=d(this).attr("id"),g=a[e],h=!1;c.wrap(c.Pointer.prototype,"drag",function(a,c){if(j.annotate){if(h||(h=!0,d(b).one("mouseup",function(){j.annotate=!1,h=!1})),j.isInsidePlot(c.chartX-j.plotLeft,c.chartY-j.plotTop)&&g.element){var e=j.xAxis[0].toValue(c.chartX),k=j.xAxis[0],l={color:g.stroke,width:g["stroke-width"]};i(g.element.id),g=f(e,k,l)}}else a.call(this,c)})}function h(){var a=d(this).attr("id");i(a)}function i(b){d("#"+b).off(),delete a[b],j.xAxis[0].removePlotLine(b)}if(c){var j=d(b).highcharts();require(["charts/draw/properties_selector/properties_selector"],function(a){var b={};b.title="Vertical Line".i18n(),b.inputValues=[{name:"Stroke width".i18n(),type:"number",id:"width","default":2,min:1,max:5},{name:"Stroke color".i18n(),type:"colorpicker",id:"color","default":"#ff0000"}],a.open(b,e)})}}(Highcharts,jQuery)}}});