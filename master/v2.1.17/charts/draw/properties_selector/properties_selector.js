define(["jquery","windows/windows","color-picker"],function(a,b){function c(c,d){require(["text!charts/draw/properties_selector/properties_selector.html"],function(e){e=a(e).i18n();var f=e.find("table");c.inputValues.forEach(function(b){var c,d;"colorpicker"===b.type?(d=a("<input type='button' value='"+b["default"]+"' class='csspopup_input_width'id='"+b.id+"' style = 'width:100px;background:"+b["default"]+"; color:"+b["default"]+"' />"),d.colorpicker({showOn:"click",position:{at:"right+100 bottom",of:"element",collision:"fit"},part:{map:{size:128},bar:{size:128}},select:function(b,c){var e="#"+c.formatted;a(d).css({background:e,color:e}).val(e)},ok:function(b,c){var e="#"+c.formatted;a(d).css({background:e,color:e}).val(e)}})):d=a("<input type='"+b.type+"' value='"+b["default"]+"' class='csspopup_input_width' style = 'width:100px;' id='"+b.id+"' name='"+b.name+"'/>"),b.min&&b.max&&(d.attr("min",b.min),d.attr("max",b.max)),c=a("<tr><td><strong>"+b.name+"</strong></td><td></td></tr>"),d.appendTo(c.find("td")[1]),a(c).i18n().appendTo(f)}),win=b.createBlankWindow(e,{title:c.title,width:240,height:200,resizable:!1,collapsable:!1,minimizable:!1,maximizable:!1,closable:!1,closeOnEscape:!1,modal:!0,ignoreTileAction:!0,"data-authorized":"true",destroy:function(){win=null},buttons:{Ok:function(){var b={},c=!1;e.find("input").each(function(d,e){var f=a(e).attr("id"),g=a(e).val();if("number"===a(e).attr("type")){var h=parseInt(a(e).attr("max")),i=parseInt(a(e).attr("min")),j=a(e).attr("name");g=parseInt(g),(g>h||i>g)&&(a.growl.error({message:'Please enter a value for "'.i18n()+j+'" between '.i18n()+i+" and ".i18n()+h+"."}),c=!0)}b[f]=g}),c||(a(this).dialog("close"),a(this).dialog("destroy"),d(b))},Cancel:function(){return a(this).dialog("close"),a(this).dialog("destroy"),{}}}}),win.dialog("open")})}return{open:c}});