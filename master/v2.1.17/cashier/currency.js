"use strict";define(["jquery","websockets/binary_websockets","windows/windows","common/rivetsExtra","text!cashier/currency.html"],function(a,b,c,d,e){require(["text!cashier/currency.html"]);var f=null,g=function(){return new Promise(function(f,g){var h=a(e),i=c.createBlankWindow(h,{dialogClass:"dialog-confirm",width:500,height:230,resizable:!1,collapsable:!1,minimizable:!1,maximizable:!1,modal:!0,ignoreTileAction:!0,close:function(){i.dialog("destroy"),i.remove(),i=null},destroy:function(){k&&k.unbind(),k=null}}),j={disabled:!1,value:"USD",array:["USD","EUR","GBP","AUD"],"continue":function(){j.disabled=!0,b.send({set_account_currency:j.value}).then(f,g).then(function(){return i.dialog("close")})},cancel:function(){i.dialog("close"),g({message:"Please set currency.".i18n()})}},k=d.bind(h[0],j);i.dialog("open")})};return{check_currency:function(){return f?f:f=g()["catch"](function(a){throw f=null,a})}}});