define(["jquery","jquery-ui","websockets/binary_websockets","navigation/menu","charts/chartWindow","jquery-growl","common/util"],function(a,b,c,d,e){"use strict";function f(a){var b=a.data("delay_amount"),c=a.data("symbol"),d=a.data("display_name");e.addNewWindow({instrumentCode:c,instrumentName:d,timePeriod:"1d",type:"candlestick",delayAmount:b})}var g=[];return{init:function(){return c.cached.send({trading_times:(new Date).toISOString().slice(0,10)}).then(function(b){if(g=d.extractChartableMarkets(b),a("#nav-menu").length>0){var c=a("<ul>").appendTo(a("#nav-menu").find(".instruments"));g=d.sortMenu(g),d.refreshMenu(c,g,f)}return g})},getMarketData:function(){return g},isMarketDataPresent:function(b,c){var d=!1;c||(c=g);var e=this;return a.each(c,function(c,f){return f.submarkets||f.instruments?d=e.isMarketDataPresent(b,f.submarkets||f.instruments):a.trim(f.display_name)==a.trim(b)&&(d=!0),!d}),d},getSpecificMarketData:function(b,c){var d={};c||(c=g);var e=this;return a.each(c,function(c,f){return f.submarkets||f.instruments?d=e.getSpecificMarketData(b,f.submarkets||f.instruments):a.trim(f.display_name)==a.trim(b)&&(d=f),a.isEmptyObject(d)}),d}}});