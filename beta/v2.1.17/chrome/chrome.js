define(["jquery","windows/windows","moment","common/util"],function(a,b,c){var d=null;return setTimeout(function(){var e=function(){var a=local_storage.get("chrome"),b=!a;if(!b){var d=a.accepted_or_cancel_time;if(b=!d,!b){var e=c.utc().valueOf()-d;b=e>=6048e5}}return b},f=e();f&&window.chrome&&chrome.webstore&&a("#webtrader-extension-is-installed").length<=0&&(d?d.moveToTop():require(["text!chrome/chrome.html"],function(e){e=a(e).i18n(),d=b.createBlankWindow(e,{dialogClass:"dialog-confirm",width:350,height:150,resizable:!1,collapsable:!1,minimizable:!1,maximizable:!1,modal:!0,ignoreTileAction:!0}),e.find("#apply").on("click",function(){d.dialog("close"),chrome.webstore.install(),local_storage.set("chrome",{accepted_or_cancel_time:c.utc().valueOf()})}),e.find("#cancel").on("click",function(){d.dialog("close"),local_storage.set("chrome",{accepted_or_cancel_time:c.utc().valueOf()})}),a("body").append(d.dialog("widget")),d.dialog("open")}))},1e3),b.event_on("tile",function(){d&&d.dialog("isOpen")&&(d.dialog("close"),d.moveToTop())}),{}});